<?php

/**
 * DefaultModel
 *  
 * @author marcone
 * @version 
 */

require_once 'Zend/Db/Table/Abstract.php';

class App_DefaultModel extends Zend_Db_Table_Abstract {

	public function init(){
		parent::init();
		$this->_schema = Zend_Registry::get('schema');
	}
	public function update($data, $where)
	{
		parent::update($data,$where);
		$log = new Model_Log();
		$data_log = array();
		$data_log['session_id']= session_id();  
  		$data_log['tabela'] = $this->_name;
  		$dados = "<dados>";
  		foreach ($data as $k=>$v)
  		{
  			$dados .= "<$k>$v</$k>";
  		}
  		
  		$dados .= "</dados>";
  		$data_log['dados'] = $dados;
  
  		$log->insert($data_log);
	}
<<<<<<< HEAD:library/App/DefaultModel.php
	public function insert($data)
	{
		parent::insert($data);
=======
	public function insert($data, $where)
	{
		parent::update($data,$where);
>>>>>>> configurado gravação de log e controle de acesso:library/App/DefaultModel.php
		$log = new Model_Log();
		$data_log = array();
		$data_log['session_id']= session_id();  
  		$data_log['tabela'] = $this->_name;
  		$dados = "<dados>";
  		foreach ($data as $k=>$v)
  		{
  			$dados .= "<$k>$v</$k>";
  		}
  		
  		$dados .= "</dados>";
  		$data_log['dados'] = $dados;
  
  		$log->insert($data_log);
	}
}

